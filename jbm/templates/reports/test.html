{% extends 'base.html' %}

{% block title %}Medical Report{% endblock %}

{% block main_content %}
    <div class="report" id="printable">
        <hr>
        <div class="patient">
            <table>
                <tr>
                    <td><strong>Patient Name:</strong></td><td class="table">{{ report[8] }}</td>
                    <td style="width: 120px;"><strong>Gender:</strong></td><td class="table">{{ report[9] }}</td>
                </tr>
                <tr>
                    <td style="width: 150px;"><strong>Phone Number:</strong></td><td class="table">0{{ report[10] }}</td>
                    <td><strong>Age:</strong></td><td class="table">{{ age }} Years</td>
                </tr>
            </table>
        </div>
        <hr>
        <div class="details">
            <h4 style="text-align: center;">Medical Details</h4>
            <table>
                <tr>
                    <td><strong>Blood Pressure:</strong></td><td style="width: 20px;">{{ report[5] }} mmHg</td>
                    <td><strong>Body Temperature:</strong></td><td>{{ report[4] }} <sup>o</sup>C</td>
                </tr>
                <tr>
                    <td><strong>Complaints:</strong></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="value">{{ report[3] }}</td>
                </tr>
                <tr>
                    <td><strong>Tests Done:</strong></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="value">{{ report[2] }}</td>
                </tr>
                <tr>
                    <td><strong>Diagnosis:</strong></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="value">{{ report[6] }}</td>
                </tr>
                <tr>
                    <td><strong>Medicine Given:</strong></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="value">{{ report[7] }}</td>
                </tr>
            </table>
        </div>
        <fieldset>
            <p style="text-align: center;">
                The report with number <strong>{{ report[1] }}</strong> was generated by <strong>{{ report[12] }}</strong> on {{ report[0] }} HRs
            </p>
        </fieldset>
    </div>
    <button class="btn" id="printButton" style="margin-bottom: 10px; margin-top: 3px; margin-left: 150px;">Print</button>

    <script>
        document.getElementById('printButton').addEventListener('click', function() {
            const printableContent = document.getElementById('printable').innerHTML;
            const printWindow = window.open('', '', 'width=800,height=600');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Print Report</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .report { width: 100%; max-width: 800px; margin: auto; }
                        table { width: 100%; border-collapse: collapse; }
                        td { padding: 8px; border: 1px solid #ddd; }
                        h4 { text-align: center; }
                    </style>
                </head>
                <body onload="window.print();">
                    <div class="report">${printableContent}</div>
                </body>
                </html>
            `);
            printWindow.document.close();
        });
    </script>
{% endblock %}
